#!/usr/bin/env bash
# Installing nginx on server listen to port 80 an return html single text page

sudo apt-get -y update
sudo apt-get -y install nginx
sudo ufw allow 80
sudo chgrp -R ubuntu /usr/share/nginx/html
sudo chmod -R g+w /usr/share/nginx/html

sudo mkdir -p /var/www/html
sudo chgrp -R ubuntu /var/www/html
sudo chmod -R g+w /var/www/html

#sudo cp /etc/nginx/sites-available/default ~/nginx_backup/sites-available/default_backup

sudo echo -e "server{\n\tlisten 80 default_server;\n\tserver_name localhost;\n\troot /var/www/html;\n\tindex index.html index.htm index.nginx-debian.html;\n\tlocation / {\n\t\ttry_files \$uri \$uri/ /index.html;\n\t}\n}" | sudo tee /etc/nginx/sites-available/default

sudo echo 'Holberton School' | sudo tee /var/www/html/index.nginx-debian.html

sudo echo 'Holberton School' | sudo tee /var/www/html/index.html

sudo service nginx restart
